<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin: Master Facility Data Entry</title>
    <link rel="stylesheet" href="https://kidsoverprofits.org/wp-content/themes/child/css/common.css">
    <link rel="stylesheet" href="https://kidsoverprofits.org/wp-content/themes/child/css/layout.css">
    <link rel="stylesheet" href="https://kidsoverprofits.org/wp-content/themes/child/css/forms.css">
    <link rel="stylesheet" href="https://kidsoverprofits.org/wp-content/themes/child/css/tables.css">
    <link rel="stylesheet" href="https://kidsoverprofits.org/wp-content/themes/child/css/modals.css">
    <link rel="stylesheet" href="https://kidsoverprofits.org/wp-content/themes/child/css/admin.css">
    <style>
        /* Admin color palette overrides */
        .admin-header {
            background: #000080;
            color: white;
            border-bottom: 3px solid #33a7b5;
        }

        .admin-header h1,
        .admin-header p {
            color: white;
        }

        /* Category tabs */
        .category-tab {
            background: white;
            color: #000080;
            border: 2px solid #33a7b5;
        }

        .category-tab:hover {
            background: #aee0ed;
            border-color: #33a7b5;
        }

        .category-tab.active {
            background: #33a7b5;
            color: white;
            border-color: #33a7b5;
        }

        /* Section headers */
        .section-header {
            background: #000080;
            border-left: 4px solid #33a7b5;
        }

        .section-title {
            color: white;
        }

        .section-toggle {
            color: white;
        }

        /* Buttons */
        .btn {
            background: #33a7b5;
            color: white;
            border: none;
        }

        .btn:hover {
            background: #000080;
        }

        .btn-secondary {
            background: #ef9034;
            color: white;
        }

        .btn-secondary:hover {
            background: #000080;
        }

        /* TOC header */
        .toc-header {
            background: #000080;
            color: white;
        }

        .toc-title {
            color: white;
        }

        .toc-toggle {
            background: #33a7b5;
            color: white;
        }

        /* Facility controls */
        .facility-controls {
            background: #fff5cb;
            border: 1px solid #33a7b5;
        }

        /* Upload status */
        .upload-status.success {
            background: #b6e3d4;
            border-left-color: #b2e102;
            color: #000080;
        }

        .upload-status.error {
            background: #fe8088;
            border-left-color: #dc2626;
            color: white;
        }

        /* Copy buttons */
        .copy-btn {
            background: #33a7b5;
            color: white;
        }

        .copy-btn:hover {
            background: #000080;
        }

        /* Input focus states */
        input:focus,
        textarea:focus,
        select:focus {
            border-color: #33a7b5;
            box-shadow: 0 0 0 3px rgba(51, 167, 181, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
                <div class="admin-header">
                        <h1>Admin: Master Facility Data Entry</h1>
                        <p>All changes auto-save to the cloud master database.</p>
                </div>
                <div class="admin-warning" style="background: #fee2e2; border-left: 4px solid #dc2626; color: #991b1b;">
                        ‚ö†Ô∏è <strong>ADMIN/MASTER MODE:</strong> Data entered here is saved directly to the master database. Changes are immediate and permanent.
                </div>

        <!-- Category Navigation -->
        <div class="category-navigation" id="category-navigation">
            <div class="flex-center mb-20">
                <div class="category-tabs">
                    <button class="category-tab active" id="facilities-tab">
                        üè¢ Companies
                    </button>
                    <button class="category-tab" id="states-tab">
                        üåç Locations
                    </button>
                </div>
            </div>
            
            <!-- Companies Content -->
            <div id="companies-content" class="category-content">
                <div class="content-header">
                    <h3>Select an Operator/Company</h3>
                    <p>All projects load from cloud storage</p>
                </div>
                <div class="items-list items-container" id="saved-projects-list">
                    <div class="text-muted italic">Loading from cloud...</div>
                </div>
            </div>
            
            <!-- States Content -->
            <div id="states-content" class="category-content d-none">
                <div class="content-header">
                    <h3>Location Projects</h3>
                    <p>All projects load from cloud storage</p>
                </div>
                <div class="items-list items-container" id="locations-list">
                    <div class="text-muted italic">Loading from cloud...</div>
                </div>
            </div>
        </div>
        
        <!-- Facility Table of Contents -->
        <div class="facility-toc" id="facility-toc">
            <div class="toc-header">
                <h2 class="toc-title">Facilities Overview</h2>
                <button class="toc-toggle" id="toc-toggle-btn">üîé</button>
            </div>
            <div class="toc-content">
                <div class="toc-stats" id="toc-stats">Total: 1 facility</div>
                <div class="facility-list" id="facility-list">
                    <!-- Facility items will be populated here -->
                </div>
                <div class="mt-15 d-flex gap-10 flex-center">
                    <button class="btn" id="add-facility-main-btn">Add New Facility</button>
                    <button class="btn" id="sort-facilities-btn">Sort Alphabetically</button>
                </div>
            </div>
        </div>
        
        <!-- Facility Navigation -->
        <div class="facility-controls">
            <div class="facility-header">
                <div class="d-flex align-items-center gap-15">
                    <strong>Current Facility: <span id="facility-counter">1 of 1</span></strong>
                    <span id="current-facility-name" class="text-muted fw-normal"></span>
                    <div class="d-flex gap-5">
                        <button class="btn d-none" id="prev-facility-btn" style="padding: 8px 12px;">‚¨ÖÔ∏è Previous</button>
                        <button class="btn d-none" id="next-facility-btn" style="padding: 8px 12px;">Next ‚û°Ô∏è</button>
                    </div>
                </div>
                <div class="controls">
                    <button class="btn" id="add-facility-btn">Add Facility</button>
                    <button class="btn d-none" id="remove-facility-btn">Remove Current</button>
                    <button class="btn" id="clone-facility-btn">Clone Facility</button>
                </div>
            </div>
        </div>

        <!-- Operator Information Section -->
        <div class="section expanded" id="operator-section">
            <div class="section-header">
                <h2 class="section-title">Operator Information</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="form-row">
                    <div class="form-group">
                        <label for="operator-name">Operator Name</label>
                        <input type="text" id="operator-name" placeholder="Type operator name..." class="input-form">
                    </div>
                    <div class="form-group">
                        <label for="operator-current-name">Current Name</label>
                        <input type="text" id="operator-current-name" placeholder="Type current operator name..." class="input-form">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Other Names</label>
                    <div class="array-container" data-path="operator.otherNames"></div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="operator-location">Primary Location</label>
                        <input type="text" id="operator-location" placeholder="e.g., Waynesboro, TN">
                    </div>
                    <div class="form-group">
                        <label for="operator-headquarters">Headquarters</label>
                        <input type="text" id="operator-headquarters" placeholder="e.g., Nashville, TN">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="operator-founded">Founded</label>
                        <input type="text" id="operator-founded" placeholder="e.g., 1985">
                    </div>
                    <div class="form-group">
                        <label for="operator-period">Operating Period</label>
                        <input type="text" id="operator-period" placeholder="e.g., 1985-Present">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="operator-status">Status</label>
                    <input type="text" id="operator-status" placeholder="Type status (Active, Acquired, Merged, Defunct, etc.)..." class="input-form">
                </div>
                
                <div class="form-group">
                    <label>Parent Companies</label>
                    <div class="array-container" data-path="operator.parentCompanies"></div>
                </div>
                
                <div class="form-group">
                    <label>Websites</label>
                    <div class="array-container" data-path="operator.websites"></div>
                </div>
                
                <h3 style="margin: 20px 0 15px 0; color: #1f2937; font-size: 15px;">Key Staff</h3>
                
                <div class="form-group">
                    <label for="operator-ceo">CEO/President</label>
                    <input type="text" id="operator-ceo" placeholder="e.g., John Smith">
                </div>
                
                <div class="form-group">
                    <label>Founders</label>
                    <div class="array-container" data-path="operator.keyStaff.founders"></div>
                </div>
                
                <div class="form-group">
                    <label>Key Executives</label>
                    <div class="array-container" data-path="operator.keyStaff.keyExecutives"></div>
                </div>

                <div class="form-group">
                    <label>Investors</label>
                    <div class="array-container" data-path="operator.investors"></div>
                </div>

                <div class="form-group">
                    <label>Operator Notes</label>
                    <div class="array-container" data-path="operator.notes"></div>
                </div>
            </div>
        </div>

        <!-- Identification Section -->
        <div class="section" id="identification-section">
            <div class="section-header">
                <h2 class="section-title">Identification & Names</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="form-row">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="facility-name" placeholder="Type facility name..." class="input-form">
                    </div>
                    <div class="form-group">
                        <label>Current Name</label>
                        <input type="text" class="facility-field" data-field="identification.currentName">
                    </div>
                </div>
                <div class="form-group">
                    <label>Current Operator</label>
                    <input type="text" class="facility-field" data-field="identification.currentOperator">
                </div>
                <div class="form-group">
                    <label>Other Names</label>
                    <div class="array-container" data-path="identification.otherNames"></div>
                </div>
            </div>
        </div>

        <!-- Location Section -->
        <div class="section" id="location-section">
            <div class="section-header">
                <h2 class="section-title">Location & Address</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="facility-field" data-field="location">
                </div>
                <div class="form-group">
                    <label>Address</label>
                    <textarea class="facility-field" data-field="address" rows="3"></textarea>
                </div>
            </div>
        </div>
        
        <!-- Operations Section -->
        <div class="section" id="operations-section">
            <div class="section-header">
                <h2 class="section-title">Facility Operations</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Other Operators</label>
                    <div class="array-container" data-path="otherOperators"></div>
                </div>
                
                <h3 style="margin: 20px 0 15px 0; color: #1f2937; font-size: 15px;">Facility Operating Dates</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Facility Opened (Year)</label>
                        <input type="number" class="facility-field" data-field="operatingPeriod.startYear" placeholder="e.g., 1985">
                    </div>
                    <div class="form-group">
                        <label>Facility Closed (Year)</label>
                        <input type="number" class="facility-field" data-field="operatingPeriod.endYear" placeholder="Leave blank if still open">
                    </div>
                </div>
                <div class="form-group">
                    <label>Current Status</label>
                    <input type="text" class="facility-field" data-field="operatingPeriod.status" placeholder="Type status (Open, Closed, Transferred, etc.)..." class="input-form">
                </div>
                <div class="form-group">
                    <label>Years of Operation</label>
                    <input type="text" class="facility-field" data-field="operatingPeriod.yearsOfOperation" placeholder="e.g., 1985-2010, 2015-Present">
                </div>
                <div class="form-group">
                    <label>Operational Notes</label>
                    <div class="array-container" data-path="operatingPeriod.notes"></div>
                </div>
            </div>
        </div>
        
        <!-- Staff Section -->
        <div class="section" id="staff-section">
            <div class="section-header">
                <h2 class="section-title">Staff & Links</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Administrator</label>
                    <div class="array-container" data-path="staff.administrator"></div>
                </div>
                <div class="form-group">
                    <label>Notable Staff</label>
                    <div class="array-container" data-path="staff.notableStaff"></div>
                </div>
                <div class="form-group">
                    <label>Profile Links</label>
                    <div class="array-container" data-path="profileLinks"></div>
                </div>
            </div>
        </div>
        
        <!-- Facility Details Section -->
        <div class="section" id="facility-section">
            <div class="section-header">
                <h2 class="section-title">Facility Details</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Program Type</label>
                    <input type="text" id="facility-type" placeholder="Type facility type..." class="input-form">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Capacity</label>
                        <input type="number" class="facility-field" data-field="facilityDetails.capacity">
                    </div>
                    <div class="form-group">
                        <label>Current Census</label>
                        <input type="number" class="facility-field" data-field="facilityDetails.currentCensus">
                    </div>
                </div>
                <div class="form-row-3">
                    <div class="form-group">
                        <label>Min Age</label>
                        <input type="number" class="facility-field" data-field="facilityDetails.ageRange.min">
                    </div>
                    <div class="form-group">
                        <label>Max Age</label>
                        <input type="number" class="facility-field" data-field="facilityDetails.ageRange.max">
                    </div>
                    <div class="form-group">
                        <label>Gender</label>
                        <input type="text" class="facility-field" data-field="facilityDetails.gender" placeholder="Type gender (Male, Female, Co-ed)..." class="input-form">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Accreditations & Memberships Section -->
        <div class="section" id="accreditations-section">
            <div class="section-header">
                <h2 class="section-title">Accreditations & Memberships</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Current Accreditations</label>
                    <div class="array-container" data-path="accreditations.current"></div>
                </div>
                <div class="form-group">
                    <label>Past Accreditations</label>
                    <div class="array-container" data-path="accreditations.past"></div>
                </div>
                <div class="form-group">
                    <label>Professional Memberships</label>
                    <div class="array-container" data-path="memberships"></div>
                </div>
                <div class="form-group">
                    <label>Certifications</label>
                    <div class="array-container" data-path="certifications"></div>
                </div>
                <div class="form-group">
                    <label>Licensing Information</label>
                    <div class="array-container" data-path="licensing"></div>
                </div>
            </div>
        </div>
        
        <!-- Resources & Documentation Section -->
        <div class="section" id="resources-section">
            <div class="section-header">
                <h2 class="section-title">Available Resources & Documentation</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <h3 style="margin: 20px 0 15px 0; color: #1f2937; font-size: 15px;">Standard Resource Types</h3>
                
                <h4 style="margin: 15px 0 10px 0; color: #1f2937; font-size: 13px;">News & Media</h4>
                <div class="checkbox-group">
                    <input type="checkbox" class="facility-checkbox" data-field="resources.hasNews" id="has-news">
                    <label for="has-news">News Articles</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" class="facility-checkbox" data-field="resources.hasPressReleases" id="has-press">
                    <label for="has-press">Press Releases</label>
                </div>

                <h3 style="margin: 30px 0 15px 0; color: #1f2937; font-size: 15px;">Resource Notes</h3>
                <div class="form-group">
                    <div class="array-container" data-path="resources.notes"></div>
                </div>
            </div>
        </div>

        <!-- General Notes Section -->
        <div class="section" id="notes-section">
            <div class="section-header">
                <h2 class="section-title">General Notes</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Facility Notes</label>
                    <div class="array-container" data-path="notes"></div>
                </div>
            </div>
        </div>
        
        <!-- Project Management Section -->
        <div class="section expanded" id="project-section">
            <div class="section-header">
                <h2 class="section-title">üíæ Project Management</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div id="project-status" style="margin-bottom: 20px; padding: 15px; background: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 4px;"></div>
                
                <div class="form-group">
                    <label for="project-name">Project Name</label>
                    <input type="text" id="project-name" placeholder="Enter project name to save..." class="input-form">
                </div>
                
                <div class="form-group">
                    <button class="btn" id="save-project-btn" style="width: 100%;">üíæ Save to Cloud</button>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-secondary" id="new-project-btn" style="width: 100%;">üìÑ New Project</button>
                </div>
                
                <div id="upload-status" style="display: none; margin-top: 15px;"></div>
            </div>
        </div>
        
        <!-- JSON Output Section -->
        <div class="section expanded" id="output-section">
            <div class="section-header">
                <h2 class="section-title">JSON Output</h2>
                <span class="section-toggle">üîé</span>
            </div>
            <div class="section-content">
                <div class="json-output">
                    <div class="output-header">
                        <h3>Generated JSON</h3>
                        <div style="display: flex; gap: 10px;">
                            <button class="copy-btn" id="copy-json-btn">Copy to Clipboard</button>
                            <button class="copy-btn" id="download-json-btn">Download JSON</button>
                        </div>
                    </div>
                    <pre id="json-display">{}</pre>
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label for="file-upload">Import JSON File</label>
                    <input type="file" id="file-upload" accept=".json">
                </div>
            </div>
        </div>
    </div>
    
    <!-- Load shared app logic (organizer, field notes, etc.) -->
    <script src="https://kidsoverprofits.org/wp-content/themes/child/js/app-logic.js"></script>
    
    <!-- Load project sync utilities -->
    <script src="https://kidsoverprofits.org/wp-content/themes/child/js/utilities.js"></script>
    
    <!-- Load consolidated facility form (cloud-first) -->
    <script src="https://kidsoverprofits.org/wp-content/themes/child/js/facility-form.v3.js"></script>
</body>
</html>